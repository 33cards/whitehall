<%= form_for [:admin, organisation], as: :organisation do |organisation_form| %>
  <%= organisation_form.errors %>
  <fieldset>
    <%= organisation_form.text_field :name %>
  </fieldset>
  <fieldset>
    <%= organisation_form.label :organisation_type_id, "Organisation type" %>
    <%= organisation_form.select :organisation_type_id, options_from_collection_for_select(OrganisationType.all, "id", "name", organisation.organisation_type_id), {include_blank: true}, class: 'chzn-select', data: { placeholder: "Choose the organisation type..." } %>
  </fieldset>
  <fieldset>
    <%= organisation_form.label :parent_organisation_ids, 'Parent organisations' %>
    <%= organisation_form.select :parent_organisation_ids, options_from_collection_for_select(Organisation.all - [organisation_form.object], 'id', 'name', organisation.parent_organisation_ids), {}, multiple: true, class: 'chzn-select', data: { placeholder: "Choose parent organisations..." } %>
  </fieldset>
  <fieldset>
    <%= organisation_form.text_area :description %>
    <%= organisation_form.text_area :address %>
    <%= organisation_form.text_field :postcode %>
    <%= organisation_form.text_field :latitude %>
    <%= organisation_form.text_field :longitude %>
  </fieldset>
  <fieldset>
    <%= organisation_form.text_field :email %>
  </fieldset>
  <fieldset class="named">
    <legend>Phone numbers</legend>
    <%= organisation_form.fields_for :phone_numbers do |phone_numbers_form| %>
      <%= phone_numbers_form.text_field :description %>
      <%= phone_numbers_form.text_field :number %>
    <% end %>
    <%= organisation_form.fields_for :phone_numbers, PhoneNumber.new do |phone_numbers_form| %>
      <%= phone_numbers_form.text_field :description %>
      <%= phone_numbers_form.text_field :number %>
    <% end %>
  </fieldset>

  <%= organisation_form.save_or_cancel %>
<% end %>