<% page_title "Edit " + @topic.name %>

<div class="span8">
  <section>
    <h1>Edit topic</h1>
    <%= render partial: "form", locals: {topic: @topic} %>
  </section>
</div>

<div class="sidebar span4">
  <section class="display_heading">
    <h1>Delete topic</h1>
    <% if @topic.destroyable? %>
      <%= button_to 'Delete', admin_topic_path(@topic), method: :delete, confirm: 'Are you sure you want to delete this topic?', class: 'btn btn-danger' %>
    <% else %>
      <div class="policies_preventing_destruction">
        <p>This topic can't be deleted as it has associated policies:</p>
        <ul>
          <% policies_preventing_destruction(@topic).each do |policy| %>
            <li><%= policy %></li>
          <% end %>
        </ul>
      </div>
    <% end %>
  </section>
</div>