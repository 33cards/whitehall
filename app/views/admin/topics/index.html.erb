<section class="resource_list">
  <div class="collection">

    <nav class="actions">
      <%= link_to "Create Topic", new_admin_topic_path, class: "button new_resource", title: "Create a Topic" %>
    </nav>

    <h1>Topics</h1>

    <table class="topics">
      <thead>
        <tr>
          <th>Name</th>
          <th>Description</th>
          <th>Details</th>
          <th>Featured</th>
        </tr>
      </thead>
      <tbody>
        <% @topics.each do |topic| %>
          <%= content_tag_for(:tr, topic, class: topic_css_classes(topic)) do %>
            <td class="name"><%= link_to topic.name, edit_admin_topic_path(topic), title: "Edit topic #{topic.name}" %></td>
            <td class="description"><%= topic.description %></td>
            <td class="details">
              <%= topic.document_breakdown.map { |key, count|
                pluralize count, key
               }.to_sentence %>
            </td>
            <td class="actions">
              <% if topic.featured? %>
                <%= button_to 'No Longer Feature', unfeature_admin_topic_path(topic), method: :post %>
              <% else %>
                <%= button_to 'Feature Topic', feature_admin_topic_path(topic), method: :post %>
              <% end %>
            </td>
          <% end %>
        <% end %>
      </tbody>
    </table>
  </div>
</section>