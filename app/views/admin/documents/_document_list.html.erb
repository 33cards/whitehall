<section class="resource_list">
  <nav class="actions">
    <%= link_to "Create Policy", new_admin_policy_path, class: "button new_resource", title: "Draft a Policy" %>
    <%= link_to "Create Publication", new_admin_publication_path, class: "button new_resource", title: "Draft a Publication" %>
    <%= link_to "Create News Article", new_admin_news_article_path, class: "button new_resource", title: "Draft a News article" %>
    <%= link_to "Create Consultation", new_admin_consultation_path, class: "button new_resource", title: "Draft a Consultation" %>
    <%= link_to "Create Speech", new_admin_speech_path, class: "button new_resource", title: "Draft a Speech" %>
  </nav>

  <div class="collection">

    <nav class="filter group">
      <div class="type group">
        <%= link_to 'all', admin_documents_state_path(@document_state), current_filter_class('all') %>
        <%= link_to 'policies', admin_documents_state_path(@document_state, filter: 'policy'), current_filter_class('policy') %>
        <%= link_to 'publications', admin_documents_state_path(@document_state, filter: 'publication'), current_filter_class('publication') %>
        <%= link_to 'news articles', admin_documents_state_path(@document_state, filter: 'news_article'), current_filter_class('news_article') %>
        <%= link_to 'consultations', admin_documents_state_path(@document_state, filter: 'consultation'), current_filter_class('consultation') %>
        <%= link_to 'speeches', admin_documents_state_path(@document_state, filter: 'speech'), current_filter_class('speech') %>
      </div>

      <div class="state group">
        <%=navigation_link 'drafts', admin_documents_path %>
        <%=navigation_link 'submitted', submitted_admin_documents_path %>
        <%=navigation_link 'published', published_admin_documents_path %>
      </div>
    </nav>

    <table class="documents">
      <thead>
        <tr>
          <th class="type">Type</th>
          <th>Title</th>
          <th>Author</th>
        </tr>
      </thead>
      <tbody>
        <% documents.each do |document| %>
          <%= content_tag_for(:tr, document) do %>
            <td class="type"><%= document.type.titleize %></td>
            <td class="title">
              <h2><%= link_to document.title, admin_document_path(document), title: "View document #{document.title}" %></h2>
              <% if document.has_supporting_documents? %>
                <div class="supporting_documents additional_information">
                  <h3>Supporting Documents</h3>
                  <ul>
                    <% document.supporting_documents.each do |supporting_document| %>
                    <li><%= link_to supporting_document.title, admin_supporting_document_path(supporting_document) %></li>
                    <% end %>
                  </ul>
                </div>
              <% end %>
            </td>
            <td class="author"><%= document.author.name %></td>
          <% end %>
        <% end %>
        <% if documents.blank? %>
          <tr>
            <td colspan="3">No <%= (params[:filter].present? ? params[:filter].humanize.pluralize.downcase : 'documents') %> have been <%= empty_documents_list_verb(document_state) %>.</td>
          </tr>
        <% end %>
      </tbody>
    </table>
  </div>
</section>