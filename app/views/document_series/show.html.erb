<% page_title @document_series.name, @organisation.name %>
<% page_class "document-series-page" %>

<div class="block-1">
  <div class="inner-block">
    <section class="document-page-header">
      <header class="page-header">
      <h1 class="page_title">
        <span class="inner">
          <span class="label">Series</span>
          <span class="title"><%= @document_series.name %></span>
        </span>
      </h1>
        <aside class="meta">
          <dl>
            <dd class="organisations">
              <%= render  partial: 'organisations/organisations_logo_list',
                        locals: { organisations: [@organisation] } %>
            </dd>
          </dl>
        </aside>
      </header>
    </section>
  </div>
</div>

<div class="block-2 ">
  <div class="inner-block">
    <div class="contextual-info js-stick-at-top-when-scrolling">
      <nav>
        <h1>Contents</h1>
        <ol>
          <% unless @document_series.description.blank? %>
            <li><a href="#this-series">In this series</a></li>
          <% end %>
          <% govspeak_headers(@document_series.description).each do |header| %>
            <li><%= link_to header.text, "##{header.id}" %></li>
          <% end %>
          <% if @published_publications.any? %>
            <li><a href="#publications">Publications</a></li>
          <% end %>
          <% if @published_consultations.any? %>
            <li><a href="#consultations">Consultations</a></li>
          <% end %>
          <% if @published_speeches.any? %>
            <li><a href="#speeches">Speeches</a></li>
          <% end %>
          <% if @published_case_studies.any? %>
            <li><a href="#case-studies">Case studies</a></li>
          <% end %>
          <% if @published_detailed_guides.any? %>
            <li><a href="#detailed-guides">Detailed guides</a></li>
          <% end %>
          <% if @published_statistical_data_sets.any? %>
            <li><a href="#statistical-data-sets">Statistical data sets</a></li>
          <% end %>
          <% if @published_news_articles.any? %>
            <li><a href="#news-articles">News articles</a></li>
          <% end %>
        </ol>
      </nav>
    </div>
  </div>
</div>

<div class="block-3">
  <div class="inner-block">
    <section id="document_series" class="group">

    <% unless @document_series.description.blank? %>
      <div class="description">
        <h2 id="this-series">In this series</h2>
        <%= govspeak_to_html @document_series.description %>
      </div>
    <% end %>

    <% if @published_publications.any? %>
      <div class="publications">
        <h2 id="publications">Publications</h2>
        <table class="document-list">
          <thead class="visuallyhidden">
            <tr>
              <th scope="col">Title</th>
              <th scope="col">Date</th>
            </tr>
          </thead>
          <tbody>
            <% @published_publications.each do |publication| %>
              <%= content_tag_for :tr, publication, class: "document-row" do %>
                <th scope="row" class="title attribute"><%= publication.link %></th>
                <td class="date attribute"><%= publication.display_date_microformat %></td>
              <% end %>
            <% end %>
          </tbody>
        </table>
      </div>
    <% end %>

    <% if @published_consultations.any? %>
      <div class="consultations">
        <h2 id="consultations">Consultations</h2>
        <table class="document-list">
          <thead class="visuallyhidden">
            <tr>
              <th scope="col">Title</th>
              <th scope="col">Date</th>
            </tr>
          </thead>
          <tbody>
            <% @published_consultations.each do |consultation| %>
              <%= content_tag_for :tr, consultation, class: "document-row" do %>
                <th scope="row" class="title attribute"><%= consultation.link %></th>
                <td class="date attribute"><%= consultation.display_date_microformat %></td>
              <% end %>
            <% end %>
          </tbody>
        </table>
      </div>
    <% end %>

    <% if @published_speeches.any? %>
      <div class="speeches">
        <h2 id="speeches">Speeches</h2>
        <table class="document-list">
          <thead class="visuallyhidden">
            <tr>
              <th scope="col">Title</th>
              <th scope="col">Date</th>
            </tr>
          </thead>
          <tbody>
            <% @published_speeches.each do |speech| %>
              <%= content_tag_for :tr, speech, class: "document-row" do %>
                <th scope="row" class="title attribute"><%= speech.link %></th>
                <td class="date attribute"><%= speech.display_date_microformat %></td>
              <% end %>
            <% end %>
          </tbody>
        </table>
      </div>
    <% end %>

    <% if @published_case_studies.any? %>
      <div class="case-studies">
        <h2 id="case-studies">Case studies</h2>
        <table class="document-list">
          <thead class="visuallyhidden">
            <tr>
              <th scope="col">Title</th>
              <th scope="col">Date</th>
            </tr>
          </thead>
          <tbody>
            <% @published_case_studies.each do |case_study| %>
              <%= content_tag_for :tr, case_study, class: "document-row" do %>
                <th scope="row" class="title attribute"><%= case_study.link %></th>
                <td class="date attribute"><%= case_study.display_date_microformat %></td>
              <% end %>
            <% end %>
          </tbody>
        </table>
      </div>
    <% end %>

    <% if @published_detailed_guides.any? %>
      <div class="detailed-guides">
        <h2 id="detailed-guides">Detailed guides</h2>
        <table class="document-list">
          <thead class="visuallyhidden">
            <tr>
              <th scope="col">Title</th>
              <th scope="col">Date</th>
            </tr>
          </thead>
          <tbody>
            <% @published_detailed_guides.each do |detailed_guide| %>
              <%= content_tag_for :tr, detailed_guide, class: "document-row" do %>
                <th scope="row" class="title attribute"><%= detailed_guide.link %></th>
                <td class="date attribute"><%= detailed_guide.display_date_microformat %></td>
              <% end %>
            <% end %>
          </tbody>
        </table>
      </div>
    <% end %>

    <% if @published_statistical_data_sets.any? %>
      <div class="statistical-data-sets">
          <h2 id="statistical-data-sets">Statistical data sets</h2>
          <table class="document-list statistical-data-sets">
            <thead class="visuallyhidden">
              <tr>
                <th scope="col">Title</th>
                <th scope="col">Date</th>
              </tr>
            </thead>
            <tbody>
              <% @published_statistical_data_sets.each do |statistical_data_set| %>
                <%= content_tag_for :tr, statistical_data_set, class: "document-row" do %>
                  <th scope="row" class="title attribute"><%= statistical_data_set.link %></th>
                  <td class="date attribute"><%= statistical_data_set.display_date_microformat %></td>
                <% end %>
              <% end %>
            </tbody>
          </table>
      </div>
    <% end %>

    <% if @published_news_articles.any? %>
      <div class="news-articles">
          <h2 id="news-articles">News articles</h2>
          <table class="document-list statistical-data-sets">
            <thead class="visuallyhidden">
              <tr>
                <th scope="col">Title</th>
                <th scope="col">Date</th>
              </tr>
            </thead>
            <tbody>
              <% @published_news_articles.each do |news_article| %>
                <%= content_tag_for :tr, news_article, class: "document-row" do %>
                  <th scope="row" class="title attribute"><%= news_article.link %></th>
                  <td class="date attribute"><%= news_article.display_date_microformat %></td>
                <% end %>
              <% end %>
            </tbody>
          </table>
      </div>
    <% end %>

    </section>
  </div>
</div>
