<% page_title @document_collection.title %>
<% page_class "document-collection-page" %>

<header class="block headings-block">
  <div class="inner-block floated-children">
    <%= render partial: 'shared/heading',
              locals: { type: 'Series', heading: @document_collection.title } %>

    <aside class="meta">
      <div class="inner-heading">
        <% if false #@document_collection.organisation.present? %>
          <dl>
            <dt><%= t('document.headings.organisations', count: 1) %>:</dt>
            <dd>
              <%= render  partial: 'organisations/organisations_name_list',
                          locals: { lead_organisations: [@organisation] } %>
            </dd>
            <% unless @groups.empty? %>
              <dt class="change-notes-title"><%= t('change_notes.page_history') %>:</dt>
              <dd class="change-notes">
                <%= t('change_notes.published_at', date: absolute_date(@most_recent_change)).html_safe %>
              </dd>
            <% end %>
          </dl>
        <% end %>
      </div>
    </aside>
  </div>
</header>

<% unless @document_collection.summary.blank? %>
  <div class="block summary">
    <div class="inner-block">
      <p><%= @document_collection.summary %></p>
    </div>
  </div>
<% end %>

<div class="block-2 ">
  <div class="inner-block">
    <div class="contextual-info js-stick-at-top-when-scrolling">
      <h1>Contents</h1>
      <ol class="dash-list">
        <% @document_collection.groups.each do |group, editions| %>
          <li><%= link_to group.heading, "#group_#{group.id}" %></li>
        <% end %>
      </ol>
    </div>
  </div>
</div>

<div class="block-3">
  <div class="inner-block">
    <section id="document_collection" class="group">

      <% unless @document_collection.body.blank? %>
        <div class="description" id="this-series">
          <%= govspeak_to_html @document_collection.body %>
        </div>
      <% end %>

      <% @document_collection.groups.each do |group| %>
        <div class="editions">
          <%= content_tag :h2, group.heading, id: "group_#{group.id}" %>
          <% unless group.body.blank? %>
            <div class="group-body">
              <%= govspeak_to_html group.body %>
            </div>
          <% end %>
          <ol class="document-list">
            <% group.editions.each do |edition| %>
              <%= content_tag_for :li, edition, class: "document-row" do %>
                <h3><%= edition.link %></h3>
                <ul class="attributes">
                  <li class="date"><%= edition.display_date_microformat %></li>
                  <li class="display-type attribute"><%= edition.display_type %></li>
                </ul>
              <% end %>
            <% end %>
          </ol>
        </div>
      <% end %>
    </section>
  </div>
</div>
